import"./modulepreload-polyfill.b7f2da20.js";import{S as P,a as u,o as z,n as m,p as B,q as L,P as E,A as W,W as H,B as k,C as F,Q as G}from"./three.module.e9e6bd54.js";import{O as I}from"./OrbitControls.cacaacad.js";import{W as R,V as a,M as h,P as V,B as y,C as D,a as O}from"./cannon-es.bbb50b7f.js";let r=new P;const i=new u(new z(200,200),new m);i.position.set(0,0,0);i.rotation.x=-Math.PI/2;i.receiveShadow=!0;r.add(i);const Q=new B(16777215,.5);r.add(Q);const w=new L(16711680,.5);w.position.set(-5,8,-5);w.castShadow=!0;r.add(w);let s=new R;s.gravity=new a(0,-9.8,0);let b=[],M=new h({friction:.1,restitution:.7});function T(){const p=new k(1,1,1),e=new m,o=new u(p,e);o.castShadow=!0,o.position.set(0,6,0),r.add(o);let q=new O(new a(.5,.5,.5)),d=new y({shape:q,material:M,mass:1,position:new a(o.position.x,o.position.y,o.position.z)});s.addBody(d),d.applyForce(new a(0,50,0),new a(1,0,0));const l=new Audio("/static/assets/metalHit.mp3");d.addEventListener("collide",A=>{const c=A.contact.getImpactVelocityAlongNormal();c>2&&(l.currentTime=0,l.volume=c>24?1:c/12/2,l.play())}),b.push({mesh:o,body:d})}document.addEventListener("dblclick",()=>{T()});let j=new V,f=new h({}),g=new y({shape:j,material:f,mass:0,position:new a(i.position.x,i.position.y,i.position.z)});g.quaternion.setFromAxisAngle(new a(1,0,0),-Math.PI/2);s.addBody(g);const x=new D(M,f,{friction:.1,restitution:.7});s.addContactMaterial(x);s.defaultContactMaterial=x;var v=window.innerWidth,C=window.innerHeight,K=v/C,t=new E(75,K,.1,1e3);t.position.z=15;t.position.y=15;t.position.x=15;let N=new W(5);r.add(N);const n=new H;n.shadowMap.enabled=!0;n.setSize(v,C);t.lookAt(0,0,0);n.render(r,t);document.body.appendChild(n.domElement);const J=new I(t,n.domElement);J.listenToKeyEvents(document.body);let U=new F;function S(p){n.render(r,t),s.step(1/120,U.getDelta()),b.forEach(e=>{console.log(e.body.quaternion.x,e.body.quaternion.y,e.body.quaternion.z),e.mesh.quaternion.copy(new G(e.body.quaternion.x,e.body.quaternion.y,e.body.quaternion.z))}),requestAnimationFrame(S)}window.requestAnimationFrame(S);window.addEventListener("resize",()=>{t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),n.setSize(window.innerWidth,window.innerHeight),n.setPixelRatio(window.devicePixelRatio)});
