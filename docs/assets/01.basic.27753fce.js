import"./modulepreload-polyfill.b7f2da20.js";import{ax as j,V as L,ay as q,h as U,X as G,P as k,S as V,q as B,p as X,t as W,aM as R,d as J,a as z,W as K,C as Q}from"./three.module.e9e6bd54.js";import{O as Y}from"./OrbitControls.cacaacad.js";class C extends j{constructor(s=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=s,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",function(){this.traverse(function(n){n.element instanceof Element&&n.element.parentNode!==null&&n.element.parentNode.removeChild(n.element)})})}copy(s,n){return super.copy(s,n),this.element=s.element.cloneNode(!0),this}}const w=new L,H=new q,T=new q,A=new L,P=new L;class Z{constructor(s={}){const n=this;let c,m,x,g;const S={objects:new WeakMap},o=s.element!==void 0?s.element:document.createElement("div");o.style.overflow="hidden",this.domElement=o,this.getSize=function(){return{width:c,height:m}},this.render=function(e,t){e.autoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.updateMatrixWorld(),H.copy(t.matrixWorldInverse),T.multiplyMatrices(t.projectionMatrix,H),y(e,e,t),_(e)},this.setSize=function(e,t){c=e,m=t,x=c/2,g=m/2,o.style.width=e+"px",o.style.height=t+"px"};function y(e,t,r){if(e.isCSS2DObject){w.setFromMatrixPosition(e.matrixWorld),w.applyMatrix4(T);const i=e.visible===!0&&w.z>=-1&&w.z<=1&&e.layers.test(r.layers)===!0;if(e.element.style.display=i===!0?"":"none",i===!0){e.onBeforeRender(n,t,r);const D=e.element;D.style.transform="translate(-50%,-50%) translate("+(w.x*x+x)+"px,"+(-w.y*g+g)+"px)",D.parentNode!==o&&o.appendChild(D),e.onAfterRender(n,t,r)}const d={distanceToCameraSquared:M(r,e)};S.objects.set(e,d)}for(let i=0,d=e.children.length;i<d;i++)y(e.children[i],t,r)}function M(e,t){return A.setFromMatrixPosition(e.matrixWorld),P.setFromMatrixPosition(t.matrixWorld),A.distanceToSquared(P)}function v(e){const t=[];return e.traverse(function(r){r.isCSS2DObject&&t.push(r)}),t}function _(e){const t=v(e).sort(function(i,d){if(i.renderOrder!==d.renderOrder)return d.renderOrder-i.renderOrder;const D=S.objects.get(i).distanceToCameraSquared,I=S.objects.get(d).distanceToCameraSquared;return D-I}),r=t.length;for(let i=0,d=t.length;i<d;i++)t[i].element.style.zIndex=r-i}}}let l,h,f,a;const $=new Q,O=new U;let E,u,b;const N=new G;ee();F();function ee(){l=new k(45,window.innerWidth/window.innerHeight,.1,200),l.position.set(0,5,-10),h=new V;const n=new B(16777215);n.position.set(0,0,1),h.add(n);const c=new X(16777215,.5);h.add(c);const m=new W(1,16,16),x=new R({specular:3355443,shininess:5,map:O.load("./textures/planets/earth_atmos_2048.jpg"),specularMap:O.load("textures/planets/earth_specular_2048.jpg"),normalMap:O.load("./textures/planets/earth_normal_2048.jpg"),normalScale:new J(.85,.85)});b=new z(m,x),h.add(b);const g=new W(.27,16,16),S=new R({shininess:5,map:O.load("textures/planets/moon_1024.jpg")});E=new z(g,S),h.add(E);const o=document.createElement("div");o.className="label",o.innerHTML="\u5730\u7403";const y=new C(o);y.position.set(0,1,0),b.add(y);const M=document.createElement("div");M.className="label1",M.innerHTML="\u4E2D\u56FD",u=new C(M),u.position.set(-.3,.5,-.9),b.add(u),console.log(u);const v=document.createElement("div");v.className="label",v.innerHTML="\u6708\u7403";const _=new C(v);_.position.set(0,.3,0),E.add(_),a=new Z,a.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(a.domElement),a.domElement.style.position="fixed",a.domElement.style.top="0px",a.domElement.style.left="0px",a.domElement.style.zIndex="10",f=new K,f.setPixelRatio(window.devicePixelRatio),f.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(f.domElement);const e=new Y(l,a.domElement);e.minDistance=5,e.maxDistance=100,window.addEventListener("resize",te)}function te(){l.aspect=window.innerWidth/window.innerHeight,l.updateProjectionMatrix(),f.setSize(window.innerWidth,window.innerHeight),a.setSize(window.innerWidth,window.innerHeight)}function F(){requestAnimationFrame(F);const p=$.getElapsedTime();E.position.set(Math.sin(p)*5,0,Math.cos(p)*5),E.rotation.set(0,p*.2,0);const s=u.position.clone(),n=s.distanceTo(l.position);s.project(l),N.setFromCamera(s,l);const c=N.intersectObjects(h.children,!0);if(c.length==0)u.element.classList.add("visible");else{const m=c[0].distance;console.log(m,n),m<n?u.element.classList.remove("visible"):u.element.classList.add("visible")}a.render(h,l),f.render(h,l)}
