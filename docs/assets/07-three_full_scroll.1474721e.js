import"./modulepreload-polyfill.b7f2da20.js";import{S as z,P as A,Y as P,W as B,d as I,B as H,M as f,a as m,X as L,e as W,f as j,g as O,D as C,t as S,n as k,o as Y,p as D,G as R,z as T,C as X}from"./three.module.e9e6bd54.js";import{O as q}from"./OrbitControls.cacaacad.js";import{g as c}from"./index.2d9ac2c0.js";let M=new z;var G=window.innerWidth,E=window.innerHeight,$=G/E,n=new A(75,$,.1,400);n.position.set(0,0,20);let y=new P,b=[];const l=new I;function K(){const o=new H(2,2,2),d=new f({wireframe:!0});for(let t=0;t<5;t++)for(let r=0;r<5;r++)for(let e=0;e<5;e++){const x=new m(o,d);x.position.set(t*2-4,r*2-4,e*2-4),y.add(x),b.push(x)}M.add(y);const a=new L,h=new f({color:"#ff0000"});window.addEventListener("mousemove",t=>{l.x=t.clientX/window.innerWidth-.5,l.y=t.clientY/window.innerHeight-.5}),window.addEventListener("click",t=>{l.x=t.clientX/window.innerWidth*2-1,l.y=-(t.clientY/window.innerHeight*2-1),a.setFromCamera(l,n),a.intersectObjects(b).forEach(e=>{e.object.material=h})})}var p=new P;function U(){for(let o=0;o<50;o++){const d=new W,a=new Float32Array(9);for(let e=0;e<9;e++)e%3,a[e]=Math.random()*10-5;d.setAttribute("position",new j(a,3));let h=new O(Math.random(),Math.random(),Math.random());const t=new f({color:h,transparent:!0,opacity:.5,side:C});let r=new m(d,t);p.add(r)}p.position.set(0,-30,0),M.add(p)}const i=new P;let u=null;function V(){const o=new S(1,20,20),d=new k({side:C}),a=new m(o,d);a.castShadow=!0,i.add(a);const h=new Y(20,20),t=new m(h,d);t.position.set(0,-1,0),t.rotation.x=-Math.PI/2,t.receiveShadow=!0,i.add(t);const r=new D(16777215,.5);i.add(r),u=new m(new S(.1,20,20),new f({color:16711680}));const e=new R(16711680,1);e.target=i,e.castShadow=!0,e.angle=Math.PI/8,e.decay=2,e.distance=40,e.shadow.mapSize.width=512,e.shadow.mapSize.height=512,e.shadow.camera.near=.1,e.shadow.camera.far=20,e.shadow.radius=20,e.shadow.radius=20,e.shadow.mapSize.set(2048,2048),new T(e.shadow.camera),u.position.set(4,4,4),u.add(e),i.add(u),i.position.set(0,-60,0),M.add(i)}V();U();K();let v=[y,p,i];const s=new B;s.setSize(G,E);n.lookAt(0,0,0);s.shadowMap.enabled=!0;s.render(M,n);document.body.appendChild(s.domElement);const J=new q(n,s.domElement);J.listenToKeyEvents(document.body);c.to(y.rotation,{x:"-="+Math.PI*2,y:"+="+Math.PI*2,duration:5,ease:"power2.inOut",repeat:-1,yoyo:!0});c.to(p.rotation,{x:"-="+Math.PI*2,z:"+="+Math.PI*2,duration:12,ease:"power2.inOut",repeat:-1});let g={x:2*Math.PI,smallBallEnd:-2*Math.PI};c.to(g,{x:g.smallBallEnd,duration:8,ease:"power2.inOut",repeat:-1,yoyo:!0,onUpdate:o=>{u.position.set(Math.sin(g.x)*5,5,Math.cos(g.x)*5)}});let N=new X;function F(){N.getElapsedTime(),n.position.y=-(window.scrollY/window.innerHeight)*30,n.position.x=l.x*10,s.render(M,n),requestAnimationFrame(F)}window.requestAnimationFrame(F);window.addEventListener("resize",()=>{n.aspect=window.innerWidth/window.innerHeight,n.updateProjectionMatrix(),s.setSize(window.innerWidth,window.innerHeight),s.setPixelRatio(window.devicePixelRatio)});let w=0;window.addEventListener("scroll",()=>{const o=Math.round(window.scrollY/window.innerHeight);o!=w&&(w=o,console.log("\u6539\u53D8\u9875\u9762\uFF0C\u5F53\u524D\u662F\uFF1A"+w),console.log(v[w].rotation),c.to(v[w].rotation,{z:"+="+Math.PI*2,x:"+="+Math.PI*2,duration:2,onComplete:()=>{console.log("\u65CB\u8F6C\u5B8C\u6210")}}),c.fromTo(`.page${w} h1`,{x:-300},{x:0,rotate:"360",duration:1}),c.fromTo(`.page${w} h3`,{scale:.1},{scale:"+=1",duration:1}))});
